{"ast":null,"code":"import React,{useRef,useState,useEffect}from'react';import'./App.css';import nightModeIcon from'./pics/dark-mode.png';import sunIcon from'./pics/sun.png';import sendIcon from'./pics/send.png';import avatarpic from'./pics/user.png';import{initializeApp}from'firebase/app';import{getFirestore,collection,orderBy,query,addDoc,serverTimestamp,limit}from'firebase/firestore';import{getAuth,GoogleAuthProvider,signInWithPopup,signOut}from'firebase/auth';import{useAuthState}from'react-firebase-hooks/auth';import{useCollectionData}from'react-firebase-hooks/firestore';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const firebaseConfig={apiKey:\"AIzaSyDbPNrpMoxEgKgh34NstKV09p-y9fZYBEY\",authDomain:\"chatroom-mann.firebaseapp.com\",projectId:\"chatroom-mann\",storageBucket:\"chatroom-mann.appspot.com\",messagingSenderId:\"452863378138\",appId:\"1:452863378138:web:2fec6ca2320f961f221be3\",measurementId:\"G-NVDFENKVZ8\"};const app=initializeApp(firebaseConfig);const auth=getAuth(app);const firestore=getFirestore(app);function App(){const[user]=useAuthState(auth);const[darkMode,setDarkMode]=useState(false);useEffect(()=>{if(darkMode){document.body.classList.add('dark-mode');}else{document.body.classList.remove('dark-mode');}},[darkMode]);const toggleDarkMode=()=>{setDarkMode(!darkMode);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Chatroom\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"dark-mode-toggle\",onClick:toggleDarkMode,children:/*#__PURE__*/_jsx(\"img\",{src:darkMode?sunIcon:nightModeIcon,className:\"light-dark\",alt:\"Toggle Dark Mode\"})}),/*#__PURE__*/_jsx(SignOut,{})]})]}),/*#__PURE__*/_jsx(\"section\",{children:user?/*#__PURE__*/_jsx(ChatRoom,{}):/*#__PURE__*/_jsx(SignIn,{})})]});}function SignIn(){const signInWithGoogle=()=>{const provider=new GoogleAuthProvider();signInWithPopup(auth,provider);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{className:\"sign-in\",onClick:signInWithGoogle,children:\"Sign in with Google\"})});}function SignOut(){return auth.currentUser&&/*#__PURE__*/_jsx(\"button\",{className:\"sign-out\",onClick:()=>signOut(auth),children:\"Sign Out\"});}function ChatRoom(){const dummy=useRef();const messagesRef=collection(firestore,'messages');const q=query(messagesRef,orderBy('createdAt'));const[messages]=useCollectionData(q,{idField:'id'});const[formValue,setFormValue]=useState('');const sendMessage=async e=>{e.preventDefault();const{uid,photoURL}=auth.currentUser;await addDoc(messagesRef,{text:formValue,createdAt:serverTimestamp(),uid,photoURL});setFormValue('');dummy.current.scrollIntoView({behavior:'smooth'});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"main\",{children:[messages&&messages.map(msg=>/*#__PURE__*/_jsx(ChatMessage,{message:msg},msg.id)),/*#__PURE__*/_jsx(\"span\",{ref:dummy})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:sendMessage,children:[/*#__PURE__*/_jsx(\"input\",{value:formValue,onChange:e=>setFormValue(e.target.value),placeholder:\"Write Here!\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!formValue,children:/*#__PURE__*/_jsx(\"img\",{src:sendIcon,alt:\"Send\",className:\"send-icon\"})})]})]});}function ChatMessage(props){const{text,uid,photoURL}=props.message;const messageClass=uid===auth.currentUser.uid?'sent':'received';return/*#__PURE__*/_jsxs(\"div\",{className:\"message \".concat(messageClass),children:[/*#__PURE__*/_jsx(\"img\",{src:photoURL||avatarpic,alt:\"Avatar\"}),/*#__PURE__*/_jsx(\"p\",{children:text})]});}export default App;","map":{"version":3,"names":["React","useRef","useState","useEffect","nightModeIcon","sunIcon","sendIcon","avatarpic","initializeApp","getFirestore","collection","orderBy","query","addDoc","serverTimestamp","limit","getAuth","GoogleAuthProvider","signInWithPopup","signOut","useAuthState","useCollectionData","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","firestore","App","user","darkMode","setDarkMode","document","body","classList","add","remove","toggleDarkMode","className","children","onClick","src","alt","SignOut","ChatRoom","SignIn","signInWithGoogle","provider","currentUser","dummy","messagesRef","q","messages","idField","formValue","setFormValue","sendMessage","e","preventDefault","uid","photoURL","text","createdAt","current","scrollIntoView","behavior","map","msg","ChatMessage","message","id","ref","onSubmit","value","onChange","target","placeholder","type","disabled","props","messageClass","concat"],"sources":["/Users/maulik/Documents/DEVELOPING/Portfolio/ChatRoom/src/App.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport './App.css';\n\nimport nightModeIcon from './pics/dark-mode.png';\nimport sunIcon from './pics/sun.png';\nimport sendIcon from './pics/send.png';\nimport avatarpic from './pics/user.png'\n\nimport { initializeApp } from 'firebase/app';\nimport { getFirestore, collection, orderBy, query, addDoc, serverTimestamp, limit } from 'firebase/firestore';\nimport { getAuth, GoogleAuthProvider, signInWithPopup, signOut } from 'firebase/auth';\n\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDbPNrpMoxEgKgh34NstKV09p-y9fZYBEY\",\n  authDomain: \"chatroom-mann.firebaseapp.com\",\n  projectId: \"chatroom-mann\",\n  storageBucket: \"chatroom-mann.appspot.com\",\n  messagingSenderId: \"452863378138\",\n  appId: \"1:452863378138:web:2fec6ca2320f961f221be3\",\n  measurementId: \"G-NVDFENKVZ8\"\n};\n\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst firestore = getFirestore(app);\n\nfunction App() {\n  const [user] = useAuthState(auth);\n  const [darkMode, setDarkMode] = useState(false);\n\n  useEffect(() => {\n    if (darkMode) {\n      document.body.classList.add('dark-mode');\n    } else {\n      document.body.classList.remove('dark-mode');\n    }\n  }, [darkMode]);\n\n  const toggleDarkMode = () => {\n    setDarkMode(!darkMode);\n  };\n\n  return (\n    <div className=\"App\">\n      <header>\n        <h1>Chatroom</h1>\n        <div className=\"header-buttons\">\n          <button className=\"dark-mode-toggle\" onClick={toggleDarkMode}>\n            <img src={darkMode ? sunIcon : nightModeIcon} className=\"light-dark\" alt=\"Toggle Dark Mode\" />\n          </button>\n          <SignOut />\n        </div>\n      </header>\n      <section>\n        {user ? <ChatRoom /> : <SignIn />}\n      </section>\n    </div>\n  );\n}\n\nfunction SignIn() {\n  const signInWithGoogle = () => {\n    const provider = new GoogleAuthProvider();\n    signInWithPopup(auth, provider);\n  }\n\n  return (\n    <>\n      <button className=\"sign-in\" onClick={signInWithGoogle}>Sign in with Google</button>\n    </>\n  )\n}\n\nfunction SignOut() {\n  return auth.currentUser && (\n    <button className=\"sign-out\" onClick={() => signOut(auth)}>Sign Out</button>\n  )\n}\n\nfunction ChatRoom() {\n  const dummy = useRef();\n  const messagesRef = collection(firestore, 'messages');\n  const q = query(messagesRef, orderBy('createdAt'));\n  const [messages] = useCollectionData(q, { idField: 'id' });\n\n  const [formValue, setFormValue] = useState('');\n\n  const sendMessage = async (e) => {\n    e.preventDefault();\n\n    const { uid, photoURL } = auth.currentUser;\n\n    await addDoc(messagesRef, {\n      text: formValue,\n      createdAt: serverTimestamp(),\n      uid,\n      photoURL\n    })\n\n    setFormValue('');\n    dummy.current.scrollIntoView({ behavior: 'smooth' });\n  }\n\n  return (\n    <>\n      <main>\n        {messages && messages.map(msg => <ChatMessage key={msg.id} message={msg} />)}\n        <span ref={dummy}></span>\n      </main>\n\n      <form onSubmit={sendMessage}>\n        <input value={formValue} onChange={(e) => setFormValue(e.target.value)} placeholder=\"Write Here!\" />\n        <button type=\"submit\" disabled={!formValue} >\n\n        <img src={sendIcon} alt=\"Send\" className=\"send-icon\" />\n        </button>\n      </form>\n    </>\n  )\n}\n\nfunction ChatMessage(props) {\n  const { text, uid, photoURL } = props.message;\n\n  const messageClass = uid === auth.currentUser.uid ? 'sent' : 'received';\n\n  return (\n    <div className={`message ${messageClass}`}>\n      <img src={photoURL || avatarpic} alt=\"Avatar\" />\n      <p>{text}</p>\n    </div>\n  )\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}